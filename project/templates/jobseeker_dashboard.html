<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Seeker Dashboard - Job Portal</title>
  
  <link rel="stylesheet" href="/static/variables.css">
  <link rel="stylesheet" href="/static/base.css">
  <link rel="stylesheet" href="/static/dashboard.css">
  
  <style>
    /* High-Feature Status Badges */
    .badge { padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 600; text-transform: capitalize; }
    .badge-pending { background: #fef3c7; color: #92400e; }
    .badge-accepted { background: #dcfce7; color: #166534; }
    .badge-rejected { background: #fee2e2; color: #991b1b; }
    
    /* Smooth Navigation Hover */
    .sidebar-menu-link:hover { background: rgba(99, 102, 241, 0.1); color: var(--primary); }
  </style>

  <svg style="display: none;">
    <symbol id="icon-dashboard" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></symbol>
    <symbol id="icon-briefcase" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></symbol>
    <symbol id="icon-file-text" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line></symbol>
    <symbol id="icon-user" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></symbol>
    <symbol id="icon-chevron-down" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="6 9 12 15 18 9"></polyline></symbol>
  </svg>
</head>
<body>
  <div class="dashboard-layout">
    <nav class="dashboard-navbar">
      <div class="navbar-left">
        <div class="navbar-logo">JobPortal</div>
        <h1 class="navbar-title">Job Seeker Dashboard</h1>
      </div>
      <div class="navbar-right">
        <div class="user-menu">
          <button class="user-menu-trigger">
            <div class="user-avatar"></div>
            <span class="user-email">{{ email }}</span>
            <svg class="icon" width="16" height="16"><use href="#icon-chevron-down"></use></svg>
          </button>
          <div class="user-menu-dropdown">
            <a href="/profile/jobseeker" class="user-menu-item"><svg class="icon" width="16" height="16"><use href="#icon-user"></use></svg> Profile</a>
            <a href="/logout" class="user-menu-item logout">Logout</a>
          </div>
        </div>
      </div>
    </nav>

    <aside class="dashboard-sidebar">
      <ul class="sidebar-menu">
        <li class="sidebar-menu-item"><a href="/dashboard/jobseeker" class="sidebar-menu-link active"><svg class="sidebar-menu-icon" width="20" height="20"><use href="#icon-dashboard"></use></svg><span>Dashboard</span></a></li>
        <li class="sidebar-menu-item"><a href="/jobs/browse" class="sidebar-menu-link"><svg class="sidebar-menu-icon" width="20" height="20"><use href="#icon-briefcase"></use></svg><span>Browse Jobs</span></a></li>
        <li class="sidebar-menu-item"><a href="#applications" class="sidebar-menu-link"><svg class="sidebar-menu-icon" width="20" height="20"><use href="#icon-file-text"></use></svg><span>Applied Jobs</span></a></li>
        <li class="sidebar-menu-item"><a href="/profile/jobseeker" class="sidebar-menu-link"><svg class="sidebar-menu-icon" width="20" height="20"><use href="#icon-user"></use></svg><span>Profile</span></a></li>
      </ul>
    </aside>

    <main class="dashboard-main">
      <div class="dashboard-content">
        <div class="dashboard-welcome">
          <h1>Welcome back, <span class="welcome-name">{{ email.split('@')[0] }}</span>!</h1>
          <p>Track your job search progress and manage applications.</p>
        </div>

        <div class="kpi-grid">
          <div class="kpi-card">
            <div class="kpi-label">Total Applications</div>
            <div class="kpi-value">{{ stats.total if stats else 0 }}</div>
            <div class="kpi-change"><span>All time</span></div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Pending</div>
            <div class="kpi-value">{{ stats.pending if stats else 0 }}</div>
            <div class="kpi-change"><span>Awaiting review</span></div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Accepted</div>
            <div class="kpi-value" style="color: #166534;">{{ stats.accepted if stats else 0 }}</div>
            <div class="kpi-change positive"><span>Congratulations!</span></div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Rejected</div>
            <div class="kpi-value">{{ stats.rejected if stats else 0 }}</div>
            <div class="kpi-change negative"><span>Keep trying</span></div>
          </div>
        </div>

        <div class="content-card" id="applications">
          <div class="content-card-header">
            <h2 class="content-card-title">Applied Jobs History</h2>
            <a href="/jobs/browse" class="btn btn-primary">Find More Jobs</a>
          </div>
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Job Title</th>
                  <th>Status</th>
                  <th>Applied Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="appliedJobsTable">
                {% if applications %}
                  {% for app in applications %}
                  <tr>
                    <td><strong>{{ app.job.title }}</strong></td>
                    <td>
                      <span class="badge badge-{{ app.status.lower() }}">
                        {{ app.status }}
                      </span>
                    </td>
                    <td>{{ app.created_at.strftime('%Y-%m-%d') if app.created_at else "N/A" }}</td>
                    <td><a href="/jobs/{{ app.job_id }}" class="text-primary">View Listing</a></td>
                  </tr>
                  {% endfor %}
                {% else %}
                  <tr>
                    <td colspan="4" class="empty-state-cell">
                      <div class="empty-state">
                        <div class="empty-state-icon">ðŸ“‹</div>
                        <div class="empty-state-title">No applications yet</div>
                        <div class="empty-state-text">Start your journey by browsing thousands of listings!</div>
                        <br>
                        <a href="/jobs/browse" class="btn btn-primary">Browse Jobs</a>
                      </div>
                    </td>
                  </tr>
                {% endif %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="/static/auth.js"></script>
  <script src="/static/jobseekerDashboard.js"></script>
</body>
</html>