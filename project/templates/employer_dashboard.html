<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employer Dashboard - Job Portal</title>
  
  <link rel="stylesheet" href="/static/variables.css">
  <link rel="stylesheet" href="/static/base.css">
  <link rel="stylesheet" href="/static/dashboard.css">
  
  <style>
    /* Success Toast Styles */
    .toast {
        position: fixed; top: 20px; right: 20px; background: #ecfdf5; border: 1px solid #10b981;
        padding: 16px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); z-index: 1000;
        display: flex; align-items: center; min-width: 300px; animation: slideIn 0.3s ease-out;
    }
    .hidden { display: none; }
    .toast-content { display: flex; align-items: center; width: 100%; }
    .icon-check { font-size: 24px; margin-right: 12px; }
    .message strong { color: #065f46; display: block; }
    .message p { color: #065f46; margin: 0; font-size: 14px; }
    .close-btn { margin-left: auto; background: none; border: none; font-size: 20px; cursor: pointer; color: #065f46; }
    
    /* Status Badge Styling */
    .status-badge {
        padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;
        background: #e0f2fe; color: #0369a1; /* Default "Active" look */
    }

    @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
  </style>

  <svg style="display: none;">
    <symbol id="icon-dashboard" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></symbol>
    <symbol id="icon-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></symbol>
    <symbol id="icon-chevron-down" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="6 9 12 15 18 9"></polyline></symbol>
  </svg>
</head>
<body>
  <div id="successToast" class="toast hidden">
      <div class="toast-content">
          <span class="icon-check">âœ…</span>
          <div class="message">
              <strong>Job Posted!</strong>
              <p>Your listing is now live and visible to candidates.</p>
          </div>
          <button onclick="this.parentElement.parentElement.remove()" class="close-btn">&times;</button>
      </div>
  </div>

  <div class="dashboard-layout">
    <nav class="dashboard-navbar">
      <div class="navbar-left">
        <div class="navbar-logo">JobPortal</div>
        <h1 class="navbar-title">Employer Dashboard</h1>
      </div>
      <div class="navbar-right">
        <div class="user-menu">
          <button class="user-menu-trigger">
            <div class="user-avatar"></div>
            <span class="user-email">{{ email }}</span>
            <svg class="icon" width="16" height="16"><use href="#icon-chevron-down"></use></svg>
          </button>
          <div class="user-menu-dropdown">
            <a href="/logout" class="user-menu-item logout">Logout</a>
          </div>
        </div>
      </div>
    </nav>

    <aside class="dashboard-sidebar">
      <ul class="sidebar-menu">
        <li class="sidebar-menu-item">
          <a href="/dashboard/employer" class="sidebar-menu-link active">
            <svg class="sidebar-menu-icon" width="20" height="20"><use href="#icon-dashboard"></use></svg>
            <span class="sidebar-menu-text">Dashboard</span>
          </a>
        </li>
        <li class="sidebar-menu-item">
          <a href="/post-job" class="sidebar-menu-link">
            <svg class="sidebar-menu-icon" width="20" height="20"><use href="#icon-plus"></use></svg>
            <span class="sidebar-menu-text">Post Job</span>
          </a>
        </li>
      </ul>
    </aside>

    <main class="dashboard-main">
      <div class="dashboard-content">
        <div class="dashboard-welcome">
          <h1>Welcome back, <span class="welcome-name">{{ email }}</span>!</h1>
          <p>Manage your active job postings and view new applicants.</p>
        </div>

        <div class="content-card" id="jobs">
          <div class="content-card-header">
            <h2 class="content-card-title">Your Job Listings</h2>
            <a href="/post-job" class="btn btn-primary">
              <svg class="icon" width="16" height="16" style="display: inline-block; vertical-align: middle;">
                <use href="#icon-plus"></use>
              </svg>
              Post New Job
            </a>
          </div>
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Job Title</th>
                  <th>Location</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% if jobs %}
                  {% for job in jobs %}
                  <tr>
                    <td><strong>{{ job.title }}</strong></td>
                    <td>{{ job.location }}</td>
                    <td><span class="status-badge">Active</span></td>
                    <td>
                        <a href="#" style="color: var(--primary); text-decoration: none; font-size: 14px;">View Details</a>
                    </td>
                  </tr>
                  {% endfor %}
                {% else %}
                  <tr>
                    <td colspan="4" class="empty-state-cell">
                      <div class="empty-state">
                        <div class="empty-state-title">No job listings yet</div>
                        <div class="empty-state-text">Click "Post New Job" to start attracting talent!</div>
                      </div>
                    </td>
                  </tr>
                {% endif %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Success Toast Logic: Shows if URL contains ?msg=success
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('msg') === 'success') {
        const toast = document.getElementById('successToast');
        toast.classList.remove('hidden');
        setTimeout(() => { 
            toast.style.opacity = '0'; 
            toast.style.transition = 'opacity 0.5s ease';
            setTimeout(() => toast.remove(), 500); 
        }, 4000);
    }
  </script>
</body>
</html>